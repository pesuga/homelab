apiVersion: v1
kind: ConfigMap
metadata:
  name: glance-config
  namespace: glance
data:
  glance.yml: |
    # Server configuration with base URL
    server:
      port: 8080
      base-url: ""

    # General configuration
    title: "PesuLabs Homelab Dashboard"
    theme:
      primary-color: "#4a69bd"
      accent-color: "#60a3bc"
      background-color: "#1e272e"
      card-background: "#2c3e50"
    
    pages:
      - name: Home
        columns:
          - size: full
            widgets:
              - type: monitor
                title: Homelab Services Status
                cache: 1m
                method: HEAD
                sites:
                  - title: Immich
                    url: https://immich.app.pesulabs.net
                    icon: si:immich
                    allow-insecure: true
                    icon_color: "#4250AF"
                  - title: Home Assistant
                    url: https://home-assistant.app.pesulabs.net
                    icon: si:homeassistant
                    allow-insecure: true
                    icon_color: "#41BDF5"
                  - title: N8N
                    url: https://n8n.app.pesulabs.net
                    icon: si:n8n
                    allow-insecure: true
                    icon_color: "#FF6D00"
                  - title: OwnCloud
                    url: https://owncloud.app.pesulabs.net
                    icon: si:owncloud
                    allow-insecure: true
                    icon_color: "#1D2D44"
                  - title: Qdrant
                    url: http://10.43.50.114:6333/dashboard
                    icon: si:database
                    icon_color: "#55C2E1"
                  - title: Grafana
                    url: https://grafana.app.pesulabs.net
                    icon: si:grafana
                    allow-insecure: true
                    icon_color: "#F46800"
                  - title: Prometheus
                    url: https://prometheus.app.pesulabs.net
                    icon: si:prometheus
                    allow-insecure: true
                    icon_color: "#E6522C"
                  - title: PostgreSQL
                    url: https://postgresql.app.pesulabs.net
                    icon: simple-icons:postgresql
                    allow-insecure: true
                    icon_color: "#336791"
          
          - size: small
            widgets:
              - type: weather
                location: Don Torcuato, Buenos Aires, Argentina
                units: metric
                hour-format: 12h
              
              - type: calendar
                first-day-of-week: monday
                show-today-indicator: true
          
          - size: medium
            widgets:
              - type: bookmarks
                title: Quick Access
                groups:
                  - title: Monitoring
                    color: 200 70 50
                    links:
                      - title: Grafana
                        url: https://grafana.app.pesulabs.net
                        icon: si:grafana
                        icon_color: "#F46800"
                      - title: Prometheus
                        url: https://prometheus.app.pesulabs.net
                        icon: si:prometheus
                        icon_color: "#E6522C"
                      - title: Logs Explorer
                        url: https://grafana.app.pesulabs.net/explore?left=%7B%22datasource%22:%22loki%22,%22queries%22:%5B%7B%22refId%22:%22A%22,%22expr%22:%22%7Bnamespace%3D~%5C%22.%2B%5C%22%7D%22%7D%5D,%22range%22:%7B%22from%22:%22now-1h%22,%22to%22:%22now%22%7D%7D
                        icon: mdi:file-document-multiple
                        icon_color: "#9C27B0"
                  - title: Database
                    color: 220 70 50
                    links:
                      - title: PostgreSQL
                        url: https://postgresql.app.pesulabs.net
                        icon: simple-icons:postgresql
                        icon_color: "#336791"
                      - title: Qdrant
                        url: http://10.43.50.114:6333/dashboard
                        icon: si:database
                        icon_color: "#55C2E1"
                  - title: Media
                    color: 150 70 50
                    links:
                      - title: Immich
                        url: https://immich.app.pesulabs.net
                        icon: si:immich
                        icon_color: "#4250AF"
                  - title: Services
                    color: 100 70 50
                    links:
                      - title: Home Assistant
                        url: https://home-assistant.app.pesulabs.net
                        icon: si:homeassistant
                        icon_color: "#41BDF5"
                      - title: N8N
                        url: https://n8n.app.pesulabs.net
                        icon: si:n8n
                        icon_color: "#FF6D00"
                      - title: OwnCloud
                        url: https://owncloud.app.pesulabs.net
                        icon: si:owncloud
                        icon_color: "#1D2D44"
      
      - name: System
        columns:
          - size: full
            widgets:
              - type: iframe
                title: Cluster Metrics
                url: https://grafana.app.pesulabs.net/d/kubernetes-compute-resources-cluster/kubernetes-compute-resources-cluster?orgId=1&refresh=10s
                height: 400px
                allow-insecure: true
                
          - size: small
            widgets:
              - type: system-info
                title: System Information
                
              - type: releases
                title: Software Versions
                cache: 60m
                releases:
                  - name: Kubernetes
                    url: https://github.com/kubernetes/kubernetes/releases
                    regex: v\d+\.\d+\.\d+
                  - name: Flux
                    url: https://github.com/fluxcd/flux2/releases
                    regex: v\d+\.\d+\.\d+
                  - name: Immich
                    url: https://github.com/immich-app/immich/releases
                    regex: v\d+\.\d+\.\d+
                  - name: Home Assistant
                    url: https://github.com/home-assistant/core/releases
                    regex: \d+\.\d+\.\d+
